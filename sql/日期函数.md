## sqlserver

```sql
-- 年份
select year(create_time) from student
-- 季度
select datename(quarter,create_time) from student
-- 月份
select month(create_time) from student
-- 月日 2000+version
SELECT FORMAT(GETDATE(), 'MM-dd')
SELECT RIGHT(CAST(getdate() AS DATE), 5)
-- 星期
SELECT DATENAME(weekday, GETDATE())
-- 日
select day(create_time) from student
SELECT FORMAT(GETDATE(), 'dd')
-- 周数
select datename(week,create_time) from student
-- 时
select DATEPART(hh, GETDATE())
-- 分
select DATEPART(mi, GETDATE())
-- 秒
select DATEPART(ss, GETDATE())
-- 年季度
select CONCAT(year(GETDATE()), '-', datename(quarter,GETDATE()))
-- 年月
SELECT FORMAT(GETDATE(), 'yyyy-MM')
select CONCAT(year(GETDATE()), '-', month(GETDATE()))
-- 年周数
select CONCAT(year(GETDATE()), '-', datename(week,GETDATE()))
-- 年月日
SELECT FORMAT(GETDATE(), 'yyyy-MM-dd')
select CONVERT(varchar(10), GETDATE(), 23)
-- 年月日时
SELECT FORMAT(GETDATE(), 'yyyy-MM-dd HH')
select concat(CONVERT(varchar(10), GETDATE(), 23),' ',DATEPART(hh, GETDATE()))
-- 年月日时分
SELECT FORMAT(GETDATE(), 'yyyy-MM-dd HH:mm')
-- 年月日时分秒
SELECT FORMAT(GETDATE(), 'yyyy-MM-dd HH:mm:ss')


-- 年月日时分秒
SELECT FORMAT(GETDATE(), 'yyyy-MM-dd HH:mm:ss')

-- 方法二 https://www.cnblogs.com/hao-1234-1234/p/7652014.html
-- 按年 yyyy yy
select DATEPART(yyyy, SYSUTCDATETIME())
-- 按月 mm m
select DATEPART(mm, SYSUTCDATETIME())
-- 按日 dd d
select DATEPART(dd, SYSUTCDATETIME())
-- 季度 qq q
select DATEPART(qq, SYSUTCDATETIME())
-- 按周 ww wk
select DATEPART(wk, SYSUTCDATETIME())
-- 按季度
select DATEPART(dy, SYSUTCDATETIME())
-- 一年的天数 dy y
select DATEPART(y, SYSUTCDATETIME())

-- 查看当前时间
select SYSUTCDATETIME() 

-- 小时
select DATEPART(hh, SYSUTCDATETIME())

select DATEPART(YEAR, getdate())
select DATEPART(MONTH, getdate()) 
select DATEPART(DAY, getdate())    
select DATEPART(HOUR, getdate()) 
select DATEPART(MINUTE, getdate())

-- 星期
SELECT
CASE (DATEPART(dw, GETDATE()) + @@DATEFIRST) % 7
WHEN 1 THEN 'Sunday'
WHEN 2 THEN 'Monday'
WHEN 3 THEN 'Tuesday'
WHEN 4 THEN 'Wednesday'
WHEN 5 THEN 'Thursday'
WHEN 6 THEN 'Friday'
WHEN 0 THEN 'Saturday'
END AS DayOfWeekName;

SET LANGUAGE N'简体中文'
SELECT DATENAME(weekday, GETDATE()) as DayOfWeekName;

```

* style数字在转换时间时的含义如下

  ```sql
  select CONVERT(varchar(100), GETDATE(), 100) 
  ```


| Style(2位表示年份) | Style(4位表示年份) | 输入输出格式                       | 输出示例                   |
| ------------------ | ------------------ | ---------------------------------- | -------------------------- |
| -                  | 0 or 100           | mon dd yyyy hh:miAM(或PM)          | Dec 21 2021  2:17PM        |
| 1                  | 101                | mm/dd/yy                           | 12/21/2021                 |
| 2                  | 102                | yy.mm.dd                           | 2021.12.21                 |
| 3                  | 103                | dd/mm/yy                           | 21/12/2021                 |
| 4                  | 104                | dd.mm.yy                           | 21.12.2021                 |
| 5                  | 105                | dd-mm-yy                           | 21-12-2021                 |
| 6                  | 106                | dd mon yy                          | 21 Dec 2021                |
| 7                  | 107                | mon dd,yy                          | Dec 21, 2021               |
| 8                  | 108                | hh:mm:ss                           | 14:20:38                   |
| -                  | 9 or 109           | mon dd yyyy hh:mi:ss:mmmmAM(或PM)  | Dec 21 2021  2:20:50:450PM |
| 10                 | 110                | mm-dd-yy                           | 12-21-2021                 |
| 11                 | 111                | yy/mm/dd                           | 2021/12/21                 |
| 12                 | 112                | yymmdd                             | 20211221                   |
| -                  | 13 or 113          | dd mon yyyy hh:mi:ss:mmm(24小时制) | 21 Dec 2021 14:21:39:653   |
| 14                 | 114                | hh:mi:ss:mmm(24小时制)             | 14:21:50:277               |
| -                  | 20 or 120          | yyyy-mm-dd hh:mi:ss(24小时制)      | 2021-12-21 14:22:00        |
| -                  | 21 or 121          | yyyy-mm-dd hh:mi:ss:mmm(24小时制)  | 2021-12-21 14:22:13.503    |
|                    | 23                 | yyyy-mm-dd                         | 2021-12-21                 |
|                    | 8 or 24            | hh:mi:ss                           | 14:27:17                   |
|                    | 126                | yyyy-mm-ddThh:mi:ss.mmm            | 2021-12-21T14:23:51.383    |

```sql
-- 处理前：2021-12-21 14:34:24  处理后：2021/12/21 14:33:26
select REPLACE(CONVERT(varchar(20), GETDATE(), 120), '-', '/') 

-- yyyy-mm-dd hh:mm
select SUBSTRING(CONVERT(varchar(20), GETDATE(), 120),0, len(CONVERT(varchar(20), GETDATE(), 120))-2) 
```



## oracle

```sql
SELECT 
-- 年份
to_char(CURRENT_DATE, 'yyyy'),
-- 季度
to_char(SYSDATE, 'q'),
-- 月份
to_char(CURRENT_DATE, 'mm'), 
-- 月日
to_char(CURRENT_DATE, 'mm-dd'),
-- 星期
to_char(sysdate,'day','NLS_DATE_LANGUAGE=AMERICAN'),
-- 日
to_char(CURRENT_DATE, 'dd'),
-- 周数
to_char(CURRENT_TIMESTAMP , 'iw'),
-- 时
to_char(CURRENT_TIMESTAMP , 'hh24'),
-- 分
to_char(CURRENT_TIMESTAMP , 'mi'),
-- 秒
to_char(CURRENT_TIMESTAMP , 'ss'),
-- 年季度
to_char(CURRENT_DATE, 'yyyy-q'),
-- 年月
to_char(CURRENT_DATE, 'yyyy-mm'),
-- 年周数
to_char(CURRENT_DATE, 'yyyy-iw'),
-- 年月日
to_char(CURRENT_DATE, 'yyyy-mm-dd'),
-- 年月日时
to_char(CURRENT_DATE, 'yyyy-mm-dd hh24'),
-- 年月日时分
to_char(CURRENT_DATE, 'yyyy-mm-dd hh24:mi'),
-- 年月日时分秒
to_char(CURRENT_DATE, 'yyyy-mm-dd hh24:mi:ss')
from dual


select 
 extract(year from systimestamp) year
,extract(month from systimestamp) month
,extract(day from systimestamp) day
,extract(minute from systimestamp) minute
,extract(second from systimestamp) second
,extract(timezone_hour from systimestamp) th
,extract(timezone_minute from systimestamp) tm
,extract(timezone_region from systimestamp) tr
,extract(timezone_abbr from systimestamp) ta
from dual

-- 23
SELECT extract(DAY FROM date'2021-12-23') FROM dual


select
-- oracle求当年的第几周,从当年的第一个星期一算当年第一周的第一天 
to_char(CURRENT_TIMESTAMP , 'yyyyiw') as week, 
-- oracle求当年的第几周,从当年的1月1日算一年的第一周的第一天
to_char(CURRENT_DATE, 'yyyyww') as week2,
-- oracle求当月的第几周,从当月的1号算一周的第一天 
to_char(CURRENT_DATE, 'yyyyw') as week3,
-- oracle求第几年
to_char(CURRENT_DATE, 'yyyy') as year, 
-- oracle求当年的第几月
to_char(CURRENT_DATE, 'mm') as month, 
-- oracle求当年的第几天
to_char(CURRENT_DATE, 'ddd') as day, 
-- oracle求当年的第几季度
to_char(SYSDATE, 'q') as quarter,
-- 年月日十分秒
to_char({}, 'yyyy-mm-dd hh24:mi:ss') AS date_time
from dual;

-- 星期
-- 2
select to_char(sysdate - 1,'d') AS dw from dual;
-- 星期二
select to_char(sysdate,'day') day from dual;
-- tuesday
select to_char(sysdate,'day','NLS_DATE_LANGUAGE=AMERICAN') day from dual;

select
-- oracle求当年的第几周,从当年的第一个星期一算当年第一周的第一天 
to_char(TO_DATE('20211225', 'YYYYMMDD') , 'yyyyiw') as week, 
-- oracle求当年的第几周,从当年的1月1日算一年的第一周的第一天
to_char(TO_DATE('20211225', 'YYYYMMDD'), 'yyyyww') as week2
FROM dual
```

## mysql

```sql
SELECT 
-- 年份
year(now()),
-- 季度
quarter(now()),
-- 月份
month(now()),
-- 月日
date_format(now(), '%m-%d'),
-- 星期
dayofweek(curdate())-1,
dayname(CURDATE()),
-- 日
day(now()),
-- 周数
week(now()),
-- 时
hour(now()),
-- 分
minute(now()),
-- 秒
second(now()),
-- 年季度
date_format(now(), '%Y-q'),
-- 年月
date_format(now(), '%Y-%m'),
-- 年周数
date_format(now(), '%Y-%u'),
-- 年月日
date_format(now(), '%Y-%m-%d'),
-- 年月日时
date_format(now(), '%Y-%m-%d %H'),
-- 年月日时分
date_format(now(), '%Y-%m-%d %H:%i'),
-- 年月日时分秒
date_format(now(), '%Y-%m-%d %H:%i:%s')


-- 字符转日期
select str_to_date('2021/12/21', '%Y/%m/%d') as day;

-- 年
select date_format(now(), '%Y') as year;
select year(now()) as year;

-- 月
select date_format(now(), '%m') as month;
select month(now()) as month;

-- 日
select date_format(now(), '%d') as day;
select day(now()) as day;

-- 周
select date_format(now(), '%u') as week;
select week(now()) as day;

-- 季
select quarter(now()) as quarter;

-- 时分秒
select hour(now()) as h, minute(now()) as m, second(now()) as s;

-- yyyy-MM-dd HH:mm:ss
select date_format(now(), '%Y-%m-%d %H:%i:%s') as day;

-- 星期
select dayofweek(curdate())-1 as dw
```

## hive

* [参考地址](https://www.gairuo.com/p/hive-sql-windowing-functions)

```sql
SELECT 
-- 年份
date_format(current_timestamp, 'yyyy'),
-- 季度
ceil(month(current_date)/3),
-- 月份
month(current_timestamp),
-- 月日
date_format(current_timestamp, 'MM-dd'),
-- 星期
pmod(datediff(current_timestamp, '1920-01-01')-3, 7), -- 3
date_format(current_timestamp ,'u'), -- 3
date_format(current_timestamp ,'EEEE'), -- Wednesday
-- 日
day(current_timestamp),
-- 周数
weekofyear(current_timestamp),
-- 时
hour(current_timestamp),
-- 分
minute(current_timestamp),
-- 秒
second(current_timestamp),
-- 年季度
concat(year(current_timestamp), '-', ceil(month(current_date)/3)),
-- 年月
date_format(current_timestamp ,'YYYY-MM'),
-- 年周数
date_format(current_timestamp ,'YYYY-w'), -- 按每年1月1日为第一周，周数偏大
concat(year(current_timestamp), '-', weekofyear(current_timestamp)) -- 偏小,
-- 年月日
date_format(current_timestamp ,'YYYY-MM-dd'),
-- 年月日时
date_format(current_timestamp ,'YYYY-MM-dd HH'),
-- 年月日时分
date_format(current_timestamp ,'YYYY-MM-dd HH:mm'),
-- 年月日时分秒
date_format(current_timestamp ,'YYYY-MM-dd HH:mm:ss')




-- 当前时间：2021-12-21 15:01:21.583
select current_timestamp;
-- 时间戳：1640070156
select unix_timestamp();
-- 2021-12-21
select CURRENT_DATE;

-- 字符转日期
select unix_timestamp('2021-12-21 12:20:21','yyyy-MM-dd HH:mm:ss') as time;
-- 2021-12-21
select to_date('2021-12-21 15:07:06');

-- 时间戳格式化
select from_unixtime(unix_timestamp(),'yyyy-MM-dd HH:mm:ss') as time;
select DATE_FORMAT(current_timestamp,'yyyy-MM-dd HH:mm:ss') as time;

-- 年
select date_format(current_timestamp, 'yyyy') as year;
select year(current_timestamp) as year;

-- 月
select date_format(current_timestamp, 'mm') as month;
select month(current_timestamp) as month;

-- 日
select date_format(current_timestamp, 'dd') as day;
select day(current_timestamp) as day;

-- 周
select weekofyear(current_timestamp) as day;

-- 星期
select pmod(datediff(current_timestamp, '1920-01-01')-3, 7) as xq;
select date_format(current_timestamp ,'u');

-- 季
select ceil(month(current_date)/3) as quarter;
select lpad(ceil(month(current_date)/3), 2, 0) as quarter;

-- 时分秒
select hour(current_timestamp) as h, minute(current_timestamp) as m, second(current_timestamp) as s;

-- 当月第一天
select trunc(current_date, 'MM');
-- 当月最后一天
select last_day(current_date);
-- 当年第一天
select trunc(current_date, 'YYYY');
-- 当年最后一天
select last_day(add_months(trunc(current_date, 'YY'), 11));
```

